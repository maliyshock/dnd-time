// getStarScale.table.test.ts
import { describe, test, expect } from "vitest";
// подправь путь под свой проект
import { getStarScale } from "./getStarScale";

/**
 * Таблица: колонки — size | s05 | s06 | s07 | s08 | s09 | s10
 * Значения — ожидаемый результат clamp((scale * size) / 18, 0.1, 1)
 * для STAR_MAX_SIZE = 36 и scale ∈ {0.5, 0.6, 0.7, 0.8, 0.9, 1.0}.
 */

type Args = { size: number; s05: number; s06: number; s07: number; s08: number; s09: number; s10: number };
describe("getStarScale — table via template literal", () => {
  test.each`
    size  | s05         | s06         | s07         | s08         | s09     | s10
    ${1}  | ${0.1}      | ${0.1}      | ${0.1}      | ${0.1}      | ${0.1}  | ${0.1}
    ${2}  | ${0.1}      | ${0.1}      | ${0.1}      | ${0.1}      | ${0.1}  | ${0.111111}
    ${3}  | ${0.1}      | ${0.1}      | ${0.116667} | ${0.133333} | ${0.15} | ${0.166667}
    ${4}  | ${0.111111} | ${0.133333} | ${0.155556} | ${0.177778} | ${0.2}  | ${0.222222}
    ${5}  | ${0.138889} | ${0.166667} | ${0.194444} | ${0.222222} | ${0.25} | ${0.277778}
    ${6}  | ${0.166667} | ${0.2}      | ${0.233333} | ${0.266667} | ${0.3}  | ${0.333333}
    ${7}  | ${0.194444} | ${0.233333} | ${0.272222} | ${0.311111} | ${0.35} | ${0.388889}
    ${8}  | ${0.222222} | ${0.266667} | ${0.311111} | ${0.355556} | ${0.4}  | ${0.444444}
    ${9}  | ${0.25}     | ${0.3}      | ${0.35}     | ${0.4}      | ${0.45} | ${0.5}
    ${10} | ${0.277778} | ${0.333333} | ${0.388889} | ${0.444444} | ${0.5}  | ${0.555556}
    ${11} | ${0.305556} | ${0.366667} | ${0.427778} | ${0.488889} | ${0.55} | ${0.611111}
    ${12} | ${0.333333} | ${0.4}      | ${0.466667} | ${0.533333} | ${0.6}  | ${0.666667}
    ${13} | ${0.361111} | ${0.433333} | ${0.505556} | ${0.577778} | ${0.65} | ${0.722222}
    ${14} | ${0.388889} | ${0.466667} | ${0.544444} | ${0.622222} | ${0.7}  | ${0.777778}
    ${15} | ${0.416667} | ${0.5}      | ${0.583333} | ${0.666667} | ${0.75} | ${0.833333}
    ${16} | ${0.444444} | ${0.533333} | ${0.622222} | ${0.711111} | ${0.8}  | ${0.888889}
    ${17} | ${0.472222} | ${0.566667} | ${0.661111} | ${0.755556} | ${0.85} | ${0.944444}
    ${18} | ${0.5}      | ${0.6}      | ${0.7}      | ${0.8}      | ${0.9}  | ${1}
    ${19} | ${0.527778} | ${0.633333} | ${0.738889} | ${0.844444} | ${0.95} | ${1}
    ${20} | ${0.555556} | ${0.666667} | ${0.777778} | ${0.888889} | ${1}    | ${1}
    ${21} | ${0.583333} | ${0.7}      | ${0.816667} | ${0.933333} | ${1}    | ${1}
    ${22} | ${0.611111} | ${0.733333} | ${0.855556} | ${0.977778} | ${1}    | ${1}
    ${23} | ${0.638889} | ${0.766667} | ${0.894444} | ${1}        | ${1}    | ${1}
    ${24} | ${0.666667} | ${0.8}      | ${0.933333} | ${1}        | ${1}    | ${1}
    ${25} | ${0.694444} | ${0.833333} | ${0.972222} | ${1}        | ${1}    | ${1}
    ${26} | ${0.722222} | ${0.866667} | ${1}        | ${1}        | ${1}    | ${1}
    ${27} | ${0.75}     | ${0.9}      | ${1}        | ${1}        | ${1}    | ${1}
    ${28} | ${0.777778} | ${0.933333} | ${1}        | ${1}        | ${1}    | ${1}
    ${29} | ${0.805556} | ${0.966667} | ${1}        | ${1}        | ${1}    | ${1}
    ${30} | ${0.833333} | ${1}        | ${1}        | ${1}        | ${1}    | ${1}
    ${31} | ${0.861111} | ${1}        | ${1}        | ${1}        | ${1}    | ${1}
    ${32} | ${0.888889} | ${1}        | ${1}        | ${1}        | ${1}    | ${1}
    ${33} | ${0.916667} | ${1}        | ${1}        | ${1}        | ${1}    | ${1}
    ${34} | ${0.944444} | ${1}        | ${1}        | ${1}        | ${1}    | ${1}
    ${35} | ${0.972222} | ${1}        | ${1}        | ${1}        | ${1}    | ${1}
    ${36} | ${1}        | ${1}        | ${1}        | ${1}        | ${1}    | ${1}
  `("size=$size -> scales (0.5..1.0) match expected", ({ size, s05, s06, s07, s08, s09, s10 }: Args) => {
    // 0.5
    expect(getStarScale({ scale: 0.5, size })).toBeCloseTo(s05, 6);
    // 0.6
    expect(getStarScale({ scale: 0.6, size })).toBeCloseTo(s06, 6);
    // 0.7
    expect(getStarScale({ scale: 0.7, size })).toBeCloseTo(s07, 6);
    // 0.8
    expect(getStarScale({ scale: 0.8, size })).toBeCloseTo(s08, 6);
    // 0.9
    expect(getStarScale({ scale: 0.9, size })).toBeCloseTo(s09, 6);
    // 1.0
    expect(getStarScale({ scale: 1.0, size })).toBeCloseTo(s10, 6);
  });
});
